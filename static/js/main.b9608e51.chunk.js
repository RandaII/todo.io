(this.webpackJsonptodo=this.webpackJsonptodo||[]).push([[0],{35:function(e,t,c){},36:function(e,t,c){},38:function(e,t,c){},39:function(e,t,c){},40:function(e,t,c){},41:function(e,t,c){},42:function(e,t,c){},43:function(e,t,c){},44:function(e,t,c){"use strict";c.r(t);var n=c(0),r=c(8),a=c.n(r),o=c(7),s=c(13),d=c.n(s),i=c(16),l=c(47),u=c(9),j=c(18),h=c(14),m=function e(){Object(h.a)(this,e)};m._sortByDate=function(e,t){return e.date>t.date?-1:e.date<t.date?1:0},m.returnRecords=function(){return localStorage.records||localStorage.setItem("records","[]"),JSON.parse(localStorage.records).sort(m._sortByDate)},m.addRecord=function(e){var t={date:(new Date).getTime(),text:e,done:!1};if(localStorage.records){var c=JSON.parse(localStorage.records);c.push(t),localStorage.records=JSON.stringify(c)}else localStorage.records=JSON.stringify([t])},m.editRecord=function(e){var t=e.id,c=e.text,n=JSON.parse(localStorage.records),r=n.findIndex((function(e){return e.date===t}));-1!==r&&(n[r].text=c,n[r].date=(new Date).getTime(),localStorage.records=JSON.stringify(n))},m.changeDoneStatus=function(e){var t=m.returnRecords(),c=t.findIndex((function(t){return t.date===e}));t[c].done=!t[c].done,localStorage.records=JSON.stringify(t)},m.deleteRecord=function(e){var t=m.returnRecords(),c=t.findIndex((function(t){return t.date===e}));localStorage.records=JSON.stringify([].concat(Object(j.a)(t.slice(0,c)),Object(j.a)(t.slice(c+1))))};var f=function(e,t){return e.filter((function(e){return e.done===t}))},b=function(e){return{type:"SET_ADD_FORM",payload:e}},x=function(e,t){var c;return"string"===typeof e&&(null===(c=m[e])||void 0===c||c.call(m,t)),{type:"FETCH_RECORDS",payload:m.returnRecords()}},O=c(2),p=(c(35),c(36),c(1)),v=function(e){var t=e.children,c=void 0===t?"":t;return Object(p.jsx)("div",{className:"header",children:c})},g=c(11),_={done:Object(p.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",enableBackground:"new 0 0 456.556 456.556",version:"1.1",viewBox:"0 0 456.556 456.556",xmlSpace:"preserve",className:"todo-categories__icon",children:[Object(p.jsx)("path",{d:"M228.278 456.556C102.403 456.556 0 354.153 0 228.278S102.403 0 228.278 0c42.641 0 84.233 11.834 120.287 34.228 6.301 3.91 8.232 12.19 4.322 18.492-3.917 6.301-12.197 8.246-18.492 4.322-31.794-19.751-68.49-30.185-106.117-30.185-111.065 0-201.422 90.36-201.422 201.422S117.213 429.7 228.278 429.7c111.062 0 201.422-90.36 201.422-201.422 0-22.324-3.623-44.243-10.77-65.147-2.399-7.015 1.35-14.652 8.365-17.051 7.029-2.385 14.652 1.35 17.051 8.365 8.099 23.709 12.211 48.551 12.211 73.834-.001 125.874-102.404 228.277-228.279 228.277z"}),Object(p.jsx)("path",{d:"M228.278 305.727c-3.406 0-6.7-1.294-9.193-3.644L111.66 201.17c-5.406-5.077-5.672-13.575-.594-18.981 5.078-5.399 13.575-5.679 18.981-.587l97.092 91.206L403.564 63.371c4.77-5.672 13.246-6.399 18.918-1.616 5.672 4.777 6.399 13.246 1.616 18.918L238.545 300.951a13.434 13.434 0 01-9.484 4.756c-.258.013-.524.02-.783.02z"})]}),list:Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",enableBackground:"new 0 0 791.911 791.911",version:"1.1",viewBox:"0 0 791.911 791.911",xmlSpace:"preserve",className:"todo-categories__icon",children:Object(p.jsx)("path",{d:"M641.43 0H150.481c-25.924 0-46.964 21.129-46.964 46.964v697.983c0 25.924 21.129 46.964 46.964 46.964H641.43c25.924 0 46.964-21.13 46.964-46.964V46.964C688.395 21.129 667.354 0 641.43 0zm11.542 745.036c0 6.747-4.794 11.541-11.541 11.541h-490.95c-6.747 0-11.541-4.794-11.541-11.541V46.964c0-6.747 4.794-11.541 11.541-11.541H641.43c6.747 0 11.541 4.794 11.541 11.541v698.072zm-81.5-188.923c0 9.588-7.635 17.223-17.223 17.223H333.633c-9.588 0-17.223-7.635-17.223-17.223s7.635-17.223 17.223-17.223H554.16c8.701-.976 17.312 7.635 17.312 17.223zm0 106.447c0 9.588-7.635 17.223-17.223 17.223H333.633c-9.588 0-17.223-7.635-17.223-17.223s7.635-17.223 17.223-17.223H554.16c8.701-.977 17.312 7.635 17.312 17.223zm0-211.916c0 9.588-7.635 17.223-17.223 17.223H333.633c-9.588 0-17.223-7.635-17.223-17.223s7.635-17.223 17.223-17.223H554.16c8.701-.001 17.312 7.635 17.312 17.223zm0-104.494c0 9.588-7.635 17.223-17.223 17.223H333.633c-9.588 0-17.223-7.635-17.223-17.223s7.635-17.223 17.223-17.223H554.16c8.701 0 17.312 7.635 17.312 17.223zM315.433 241.657c0-9.588 7.635-17.223 17.223-17.223h218.575c9.588 0 17.223 7.635 17.223 17.223s-7.635 17.223-17.223 17.223H332.745c-9.588 0-17.312-7.635-17.312-17.223zm0-105.47c0-9.588 7.635-17.223 17.223-17.223h218.575c9.588 0 17.223 7.635 17.223 17.223s-7.635 17.223-17.223 17.223H332.745c-9.588.977-17.312-7.634-17.312-17.223zm-63.3 0c0 10.565-8.612 19.176-19.176 19.176-10.565 0-19.176-8.612-19.176-19.176 0-10.565 8.612-19.176 19.176-19.176 10.565 0 19.176 8.612 19.176 19.176zm0 105.47c0 10.565-8.612 19.176-19.176 19.176-10.565 0-19.176-8.612-19.176-19.176s8.612-19.176 19.176-19.176c10.565-.977 19.176 7.635 19.176 19.176zm0 102.54c0 10.565-8.612 19.176-19.176 19.176-10.565 0-19.176-8.612-19.176-19.176s8.612-19.176 19.176-19.176c10.565-.888 19.176 7.724 19.176 19.176zm0 104.582c0 10.565-8.612 19.176-19.176 19.176-10.565 0-19.176-8.612-19.176-19.176 0-10.565 8.612-19.176 19.176-19.176 10.565 0 19.176 8.612 19.176 19.176zm0 108.311c0 10.565-8.612 19.176-19.176 19.176-10.565 0-19.176-8.612-19.176-19.176 0-10.565 8.612-19.176 19.176-19.176 10.565 0 19.176 8.611 19.176 19.176zm0 105.47c0 10.565-8.612 19.176-19.176 19.176-10.565 0-19.176-8.612-19.176-19.176 0-10.565 8.612-19.176 19.176-19.176 10.565-.977 19.176 8.611 19.176 19.176z"})}),menu:Object(p.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"96",height:"96",x:"0",y:"0",version:"1.1",viewBox:"0 0 96 96",xmlSpace:"preserve",className:"todo-categories__icon",children:Object(p.jsx)("switch",{children:Object(p.jsx)("g",{children:Object(p.jsx)("path",{d:"M12 28h72a4 4 0 000-8H12a4 4 0 000 8zm72 16H12a4 4 0 000 8h72a4 4 0 000-8zm0 24H12a4 4 0 000 8h72a4 4 0 000-8z"})})})})},w=(c(38),function(e){var t=e.children;return Object(p.jsx)("aside",{className:"todo-categories",children:Object(p.jsx)("div",{className:"todo-categories__wrapper",children:t.map((function(e){var t=e.id,c=e.href,n=e.title,r=e.icon;return Object(p.jsxs)(g.b,{to:c,className:"todo-categories__item",children:[_[r],Object(p.jsx)("span",{className:"todo-categories__title",children:n})]},t)}))})})}),y=c(5),N=(c(39),{setAddForm:b}),S=Object(u.b)((function(){return{}}),N)((function(e){var t=e.children,c=t.date,n=t.text,r=t.done,a=e.onInputChange,o=e.onCloseClick,s=e.setAddForm,d=function(e){var t=new Date(e),c=new Date;return t.getDay()===c.getDay()&&t.getMonth()===c.getMonth()&&t.getFullYear()===c.getFullYear()?new Intl.DateTimeFormat("ru",{hour:"2-digit",minute:"2-digit"}).format(new Date(e)):new Intl.DateTimeFormat("ru",{day:"numeric",month:"long"}).format(new Date(e))}(c);return Object(p.jsxs)("div",{className:"todo-item",tabIndex:"0",onKeyDown:function(e){var t=e.target,c=e.key;t.dataset.todoItem&&"Enter"===c&&a()},"data-todo-item":!0,children:[Object(p.jsx)("input",{type:"checkbox",name:c,id:c,onChange:a,checked:r}),Object(p.jsxs)("label",{htmlFor:c,children:[Object(p.jsxs)("div",{className:"todo-item__wrapper",children:[Object(p.jsx)("span",{className:"todo-item__checkbox"}),Object(p.jsx)("span",{className:"todo-item__text",children:n})]}),Object(p.jsx)("p",{className:"todo-item__date",children:d})]}),Object(p.jsxs)("div",{className:"todo-item__button-container",children:[Object(p.jsx)("button",{type:"button",className:"todo-item__edit",onClick:function(){s({status:!0,type:"edit",record:{id:c,text:n}})},children:Object(p.jsxs)("svg",{fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"18px",height:"18px",children:["    ",Object(p.jsx)("path",{d:"M 18 2 L 15.585938 4.4140625 L 19.585938 8.4140625 L 22 6 L 18 2 z M 14.076172 5.9238281 L 3 17 L 3 21 L 7 21 L 18.076172 9.9238281 L 14.076172 5.9238281 z"})]})}),Object(p.jsx)("button",{type:"button",className:"todo-item__close",onClick:o})]})]})})),F=(c(40),function(e){var t=e.clickFunc,c=e.children,n=void 0===c?"":c;return Object(p.jsx)("button",{onClick:t,className:"add-button ".concat(n),children:"+"})}),D=(c(41),{setAddForm:b,fetchRecords:x}),k=Object(u.b)((function(){return{}}),D)((function(e){var t=e.setAddForm,c=e.fetchRecords,r=e.children,a=void 0===r?[]:r,o=Object(n.useState)(""),s=Object(y.a)(o,2),d=s[0],i=s[1],l=a.map((function(e){return Object(p.jsx)(S,{onInputChange:function(){return c("changeDoneStatus",e.date)},onCloseClick:function(){return c("deleteRecord",e.date)},children:e},e.date)}));return Object(n.useEffect)((function(){var e=document.getElementById("app").clientHeight<=604?" fix-pos":"";d!==e&&i(e)})),Object(p.jsx)("section",{className:"todo-list","aria-label":"Todo Tabs",children:Object(p.jsxs)("div",{className:"todo-list__wrapper",children:[l,Object(p.jsx)(F,{clickFunc:function(){return t({status:!0,type:"add"})},children:d})]})})})),z=(c(42),function(e){var t,c,r=e.sendFunc,a=e.areaText,o=void 0===a?"":a,s=e.children,d=void 0===s?"":s,i=e.type,l=Object(n.useState)(o),u=Object(y.a)(l,2),j=u[0],h=u[1],m=Object(n.useState)(!1),f=Object(y.a)(m,2),b=f[0],x=f[1];"edit"===i?(t="\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",c="\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"):"add"===i&&(t="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0437\u0430\u043c\u0435\u0442\u043a\u0443",c="\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c");var O=function(e){if(e.preventDefault(),""===j.trim())return x(!0),void h("");r(j)};return Object(p.jsx)("div",{className:"add-form__wrapper ".concat(d),children:Object(p.jsx)("form",{className:"add-form",onSubmit:O,children:Object(p.jsxs)("div",{className:"add-form__fieldset-wrapper",children:[Object(p.jsx)("h1",{className:"add-form__title","data-add-form":!0,children:t}),Object(p.jsxs)("fieldset",{"data-add-form":!0,children:[Object(p.jsx)("textarea",{name:"add-form__textarea",id:"add-form__textarea",className:"add-form__textarea",cols:"30",rows:"10","data-add-form":!0,value:j,onChange:function(e){var t=e.target.value;return h(t)},onFocus:function(){return x(!1)},autoFocus:!0}),b&&Object(p.jsx)("p",{className:"add-form__notification","data-add-form":!0,children:"\u0422\u0435\u043a\u0441\u0442 \u0437\u0430\u043c\u0435\u0442\u043a\u0438 \u043f\u0443\u0441\u0442"}),Object(p.jsx)("button",{type:"button",className:"add-form__button","data-add-form":!0,onClick:O,children:c})]})]})})})}),C=c(21),H=c(24),R=c(22),E=(c(43),function(){return Object(p.jsx)("p",{className:"notification",children:"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"})}),T=function(e){Object(H.a)(c,e);var t=Object(R.a)(c);function c(){var e;Object(h.a)(this,c);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).state={hasError:!1},e}return Object(C.a)(c,[{key:"componentDidCatch",value:function(){this.setState({hasError:!0})}},{key:"render",value:function(){return this.state.hasError?Object(p.jsx)(E,{}):this.props.children}}]),c}(n.Component),I=T,B={setAddForm:b,fetchRecords:x},L=Object(u.b)((function(e){return Object(o.a)({},e)}),B)((function(e){var t,c=e.setAddForm,r=e.records,a=e.fetchRecords,o=e.addForm,s=[{id:0,href:"/",title:"All tasks",icon:"menu"},{id:1,href:"/todo",title:"Todo",icon:"list"},{id:2,href:"/done",title:"Done",icon:"done"}],u=function(){return setTimeout((function(){return window.scrollBy({top:-document.body.offsetHeight,behavior:"smooth"})}),200)},j=function(){var e=Object(i.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a("addRecord",t),e.next=3,c({status:!1,type:"add"});case 3:u();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(i.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a("editRecord",{text:t,id:o.record.id}),e.next=3,c({status:!1,type:"edit",record:{id:null,text:""}});case 3:u();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){return a()}),[]);var m=Object(p.jsx)(I,{children:Object(p.jsxs)(O.d,{children:[Object(p.jsx)(O.b,{path:"/",element:Object(p.jsx)(k,{children:r}),exact:!0}),Object(p.jsx)(O.b,{path:"/todo",element:Object(p.jsx)(k,{children:f(r,!1)}),exact:!0}),Object(p.jsx)(O.b,{path:"/done",element:Object(p.jsx)(k,{children:f(r,!0)}),exact:!0}),Object(p.jsx)(O.b,{path:"*",element:Object(p.jsx)(O.a,{to:"/"})})]})}),b=Object(O.f)().pathname,x=s.findIndex((function(e){var t=e.href;return b===t})),g=function(e){var t=e.target,n=e.key;!o.status||t.dataset.addForm&&"Escape"!==n||c({status:!1})};return Object(p.jsxs)("div",{id:"app",className:"app",onBlur:function(e){null!==e.relatedTarget&&o.status&&(e.relatedTarget.dataset.addForm||e.target.focus())},onMouseDown:g,onKeyUp:g,children:[Object(p.jsx)(v,{children:"Todo list - ".concat(null===(t=s[x])||void 0===t?void 0:t.title)}),Object(p.jsxs)("section",{className:"app__main",children:[Object(p.jsx)(I,{children:Object(p.jsx)(w,{children:s})}),m]}),Object(p.jsx)(l.a,{in:o.status,timeout:200,mountOnEnter:!0,unmountOnExit:!0,children:function(e){var t;return Object(p.jsx)(I,{children:Object(p.jsx)(z,{sendFunc:"edit"===o.type?h:j,type:o.type,areaText:(null===o||void 0===o||null===(t=o.record)||void 0===t?void 0:t.text)||"",children:"".concat(e)})})}})]})})),M=L,A=c(23),J={addForm:{status:!1,type:"edit",record:{id:null,text:""}},records:[]},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_ADD_FORM":return Object(o.a)(Object(o.a)({},e),{},{addForm:Object(o.a)(Object(o.a)({},e.addForm),t.payload)});case"FETCH_RECORDS":return Object(o.a)(Object(o.a)({},e),{},{records:t.payload});default:return e}},V=Object(A.a)(K);a.a.render(Object(p.jsx)(u.a,{store:V,children:Object(p.jsx)(g.a,{children:Object(p.jsx)(M,{})})}),document.getElementById("root"))}},[[44,1,2]]]);
//# sourceMappingURL=main.b9608e51.chunk.js.map